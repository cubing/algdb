type Query {
  getUser(id: ID!): User!
  getUsers(): [User]!
  getPuzzles(): [Puzzle]!
  getTags(): [Tags]!
  getAlgs(tag_names: [String], user_id: ID!): [Alg]!
}

type Mutation {
  loginUser(username: String!, password: String!): Auth!
  socialLogin(provider: String!, code: String!): Auth!
  createPuzzle(): Puzzle!
  createAlgSet(puzzle_id: ID!): AlgSet!
  createCase(algset_id: ID!): Case!
  createAlg(case_id: ID!): Alg!
  createTag(name: String!): Tag!
  voteAlg(alg_id: ID!, upvote: Boolean!): Alg!
  updateUser(user_id: ID!, is_public: Boolean): User!
  createUserAlgTagLink(tag_id: ID!, alg_id: ID!): UserAlgTagLink!
}

type Auth {
  type: String!
  token: String!
  user: User!
}

type User {
  id: ID!
  provider: String!
  provider_id: String!
  wca_id: String!
  email: String! 
  name: String!
  cubic_color_scheme: ColorScheme
  skewb_color_scheme: ColorScheme
  square1_color_scheme: ColorScheme
  megaminx_color_scheme: ColorScheme
  pyraminx_color_scheme: ColorScheme
  is_public: Boolean!
  created_at: DateTime!
  updated_at: DateTime
  created_by: User!
  role: UserRole
  taggedAlgs(tag_names: [String]): [Alg]!
}

enum UserRole {
  ADMIN
  MODERATOR
  NORMAL
}

type ColorScheme {
  id: ID!
  side1: String
  side2: String
  side3: String
  side4: String
  side5: String
  side6: String
}

type Puzzle {
  id: ID!
  name: String!
  created_at: DateTime!
  updated_at: DateTime
  created_by: User!
  algSets(): [AlgSet]!
}

type AlgSet {
  id: ID!
  name: String!
  created_at: DateTime!
  updated_at: DateTime
  created_by: User!
  puzzle: Puzzle!
  cases(): [Case]!
}

type Case {
  id: ID!
  name: String!
  created_at: DateTime!
  updated_at: DateTime
  created_by: User!
  algset: AlgSet!
  algs(): [Alg]!
}

type Alg {
  id: ID!
  sequence: String!
  case: Case!
  up_votes: Int!
  total_votes: Int!
  current_user_vote: Boolean
  created_at: DateTime!
  updated_at: DateTime
  created_by: User!
  current_user_tags: [Tag]
}



type Tag {
  id: ID!
  type: 
  name: String!
  created_at: DateTime!
  updated_at: DateTime
  created_by: User!
}

type UserAlgTagLink {
  id: ID!
  user: User!
  tag: Tag!
  alg: Alg!
}